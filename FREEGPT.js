const FREEGPT = {version:"1.0.1",proxies:["https://api.allorigins.win/get?url="],proxyUsed:0,response:null,APIS:["https://chatbot-ji1z.onrender.com/chatbot-ji1z",function(q){return "https://you.com/search?q="+encodeURIComponent(q)+"&fromSearchBar=true&tbm=youchat&cid=c2_9c5cea04-d5c1-4cc7-ac20-1f257e85373f"}],processes:[],history:[],tryProxies:async function(url,pos){return new Promise((resolve,reject)=>{const xhr=new XMLHttpRequest();const withProxy=FREEGPT.proxies[pos]+encodeURIComponent(url);xhr.open("GET",withProxy);xhr.onload=function(){if(xhr.status!==200){if(pos===FREEGPT.proxies.length-1){resolve(null)}resolve(FREEGPT.tryProxies(url,pos+1))}else{FREEGPT.proxyUsed=pos;resolve(xhr.response)}};xhr.onerror=function(){if(pos===FREEGPT.proxies.length-1){resolve(null)}resolve(tryProxies(url,pos+1))};xhr.send()})},process1:async function(query){const content=[...FREEGPT.history,{role:"user",content:query}];FREEGPT.history=content;const body={messages:content};const petition=await fetch(FREEGPT.APIS[0],{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(body)});if(petition.ok){const response=await petition.json();if(response.choices&&response.choices[0].message.content){const answer=response.choices[0].message.content;FREEGPT.history.push({role:"assistant",content:answer});return answer}}},talk:async function(query,process){return new Promise(async function(resolve,reject){let ans;let errorLog;let givenError=false;try{if(typeof process!=="number"||process===1){ans=FREEGPT.process1(query)}else{throw new Error("FREEGPT\n\nUnknown number of process: "+process)}}catch(err){givenError=true;errorLog=err}finally{if(!givenError){resolve(ans)}else{console.error(errorLog);resolve(undefined)}}})}};